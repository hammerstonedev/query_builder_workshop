# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.
image: 
  file: gitpod.Dockerfile
tasks:
  - init: |
      redis-server
      gp sync-done redis_start
  - init: gp sync-await redis_start
    command: |
      yarn install && yarn run build && bin/setup
      rails server

ports:
  # Rails server
  - port: 3000
    onOpen: open-preview
  # PostgreSQL server
  - port: 5432
    onOpen: ignore
